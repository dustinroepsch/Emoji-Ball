(function () {var a={};Object.defineProperty(a,"__esModule",{value:!0});var h=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.norm=function(){return this.scale(1/this.mag())},t.prototype.clampMag=function(t){return this.mag()>t?this.norm().scale(53):this},t.prototype.dist=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},t}(),i=h;a.Vector=i;var l=function(){return function(){this.positionMeters=new h(225,225),this.velocityMetersPerSecond=new h(0,0),this.massKg=70,this.radiusMeters=100,this.sprite="\u26BD\uFE0F"}}(),E=l;a.Ball=E;var D=function(){return function(){this.gameWidthSoccerBalls=4,this.gameHeightSoccerBalls=7,this.pixelsPerMeter=1,this.gravityMetersPerSecondSquared=9.8,this.touchForceNewtons=1500,this.ball=new l}}(),o=D;a.GameState=o;var c,G,j={};Object.defineProperty(j,"__esModule",{value:!0}),function($){$.TICK="TICK",$.CLICK="CLICK",$.SET_GAME_HEIGHT_PIXELS="SET_GAME_HEIGHT_PIXELS"}(G=c||(c={},j.Actions=c));var k={};Object.defineProperty(k,"__esModule",{value:!0});var w=function(){function e(){}return e.gameWidthMeters=function(e){return e.gameWidthSoccerBalls*e.ball.radiusMeters*2},e.gameHeightMeters=function(e){return e.gameHeightSoccerBalls*e.ball.radiusMeters*2},e.gameWidthPixels=function(e){return this.gameWidthMeters(e)*e.pixelsPerMeter},e.gameHeightPixels=function(e){return this.gameHeightMeters(e)*e.pixelsPerMeter},e}(),f=w;k.DataExtracter=f;var e={},A=e&&e.__assign||Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var $ in r=arguments[t])Object.prototype.hasOwnProperty.call(r,$)&&(e[$]=r[$]);return e};Object.defineProperty(e,"__esModule",{value:!0});var z=function(){function e(){}return e.reduce=function(r,t){var a=A({},r);switch(t.type){case c.SET_GAME_HEIGHT_PIXELS:a.pixelsPerMeter=t.params.gameHeightPixels/f.gameHeightMeters(r);break;case c.TICK:e.applyGravity(a,t.params.delta);break;case c.CLICK:if(new i(t.params.xPixels/r.pixelsPerMeter,t.params.yPixels/r.pixelsPerMeter).dist(r.ball.positionMeters)<1.5*r.ball.radiusMeters){var $=r.touchForceNewtons/r.ball.massKg;a.ball.velocityMetersPerSecond.y-=$}break;default:throw new Error("Action type: "+t.type+" is unknown.");}return a},e.applyGravity=function(e,r){var t=e.gravityMetersPerSecondSquared;e.ball.velocityMetersPerSecond.y+=t*r,e.ball.velocityMetersPerSecond=e.ball.velocityMetersPerSecond.clampMag(53),e.ball.positionMeters=e.ball.positionMeters.add(e.ball.velocityMetersPerSecond)},e}(),q=z;e.ActionHandler=q;var r={};Object.defineProperty(r,"__esModule",{value:!0});var B=function(){function e(){this.state=new o}return e.prototype.dispatch=function(e){this.state=q.reduce(this.state,e)},e}(),t=B;r.App=t;var u={};Object.defineProperty(u,"__esModule",{value:!0});var x=function(){function e(){}return e.render=function(r,t){r.clearRect(0,0,f.gameWidthPixels(t),f.gameHeightPixels(t)),e.renderBall(r,t)},e.renderBall=function(e,r){e.font=e.font.replace(/\d+px/g,2*r.ball.radiusMeters*r.pixelsPerMeter+"px"),e.fillText(r.ball.sprite,r.ball.positionMeters.x*r.pixelsPerMeter-r.ball.radiusMeters*r.pixelsPerMeter,r.ball.positionMeters.y*r.pixelsPerMeter+r.ball.radiusMeters*r.pixelsPerMeter)},e}(),v=x;u.Renderer=v;var s={};Object.defineProperty(s,"__esModule",{value:!0});var y=function(){function t(){this.lastTick=Date.now()}return t.prototype.readSeconds=function(){var t=Date.now(),o=t-this.lastTick;return this.lastTick=t,.001*o},t}(),p=y;s.Stopwatch=p;var g={};Object.defineProperty(g,"__esModule",{value:!0});var d=new t,b=document.createElement("canvas"),n=b.getContext("2d");if(!n){var m=document.createElement("div");m.appendChild(document.createTextNode("Unable to create canvas context \uD83D\uDE13")),document.body.appendChild(m)}b.addEventListener("click",function(a){d.dispatch({type:c.CLICK,params:{xPixels:a.pageX-b.offsetLeft,yPixels:a.pageY-b.offsetTop}})});var C=n;document.body.appendChild(b),d.dispatch({type:c.SET_GAME_HEIGHT_PIXELS,params:{gameHeightPixels:800}});var F=new p;setInterval(function(){d.dispatch({type:c.TICK,params:{delta:F.readSeconds()}}),b.width!=f.gameWidthPixels(d.state)&&(b.width=f.gameWidthPixels(d.state)),b.height!=f.gameHeightPixels(d.state)&&(b.height=f.gameHeightPixels(d.state)),v.render(C,d.state)},1e-9);if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=g}else if(typeof define==="function"&&define.amd){define(function(){return g})}})();